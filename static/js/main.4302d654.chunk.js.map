{"version":3,"sources":["App.tsx","index.tsx"],"names":["List","id","Math","random","react_default","a","createElement","className","tabIndex","onWheel","e","onWheelHandler","range","map","n","key","concat","wheelTimeoutRefsById","isSelf","re","self","currentTarget","parentElement","nativeEvent","isInside","ancestor","descendant","document","activeElement","scrollPastTop","deltaY","scrollTop","scrollPastBottom","scrollHeight","clientHeight","preventDefault","stopPropagation","style","paddingRight","offsetWidth","clientWidth","overflow","clearTimeout","setTimeout","App","Fragment","_","ReactDOM","render","src_App","getElementById"],"mappings":"gKAaA,SAASA,IACR,IAAIC,EAAKC,KAAKC,SAAW,GACzB,OACCC,EAAAC,EAAAC,cAAA,OACCC,UAAU,UACVC,SAAU,EACVC,QAAS,SAAAC,GAAC,OAAIC,GAAe,EAAMV,EAAIS,KAEvCN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QAAQE,QAAS,SAAAC,GAAC,OAAIC,GAAe,EAAOV,EAAIS,KAC7DE,gBAAM,IAAIC,IAAI,SAAAC,GAAC,OACfV,EAAAC,EAAAC,cAAA,UAAQS,IAAKD,GAAb,WAAAE,OAA4BF,QAOjC,IAAIG,EAA6C,GAEjD,SAASN,EAAeO,EAAiBjB,EAAYkB,GACpD,IAAIC,EAAOF,EACPC,EAAGE,cACHF,EAAGE,cAAcC,cACjBZ,EAAIS,EAAGI,YACX,GA0BD,SAASC,EAASC,EAAmBC,GACpC,IAAKA,EAAY,OAAO,EACxB,GAAID,GAAYC,EAAY,OAAO,EACnC,OAAOF,EAASC,EAAUC,EAAWJ,eA7BjCE,CAASJ,EAAMO,SAASC,eAAgB,CAC3C,IAAIC,EAAgBnB,EAAEoB,OAAS,GAAKV,EAAKW,WAAa,EAClDC,EACHtB,EAAEoB,OAAS,GACXV,EAAKW,WAAaX,EAAKa,aAAeb,EAAKc,cACxCL,GAAiBG,IACpBb,EAAGgB,iBAEJhB,EAAGiB,uBAEGnC,KAAMgB,IACXG,EAAKiB,MAAMC,aAAX,GAAAtB,OAA6BI,EAAKmB,YACjCnB,EAAKoB,YACL,EAFD,MAGApB,EAAKiB,MAAMI,SAAW,SACtBtB,EAAGgB,kBAEJO,aAAazB,EAAqBhB,IAClCgB,EAAqBhB,GAAM0C,WAAW,kBAC9B1B,EAAqBhB,GAC5BmB,EAAKiB,MAAMC,aAAe,MAC1BlB,EAAKiB,MAAMI,SAAW,QACpB,KAUUG,MAlEf,WACC,OACCxC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAwC,SAAA,KACEjC,gBAAM,IAAIC,IAAI,SAAAiC,GAAC,OACf1C,EAAAC,EAAAC,cAACN,EAAD,CAAMe,IAAK+B,cCFfC,IAASC,OAAO5C,EAAAC,EAAAC,cAAC2C,EAAD,MAAStB,SAASuB,eAAe","file":"static/js/main.4302d654.chunk.js","sourcesContent":["import { range } from 'illa/ArrayUtil'\nimport React from 'react'\n\nfunction App() {\n\treturn (\n\t\t<>\n\t\t\t{range(50).map(_ => (\n\t\t\t\t<List key={_} />\n\t\t\t))}\n\t\t</>\n\t)\n}\n\nfunction List() {\n\tlet id = Math.random() + ''\n\treturn (\n\t\t<div\n\t\t\tclassName='wrapper'\n\t\t\ttabIndex={0}\n\t\t\tonWheel={e => onWheelHandler(true, id, e)}\n\t\t>\n\t\t\t<div className='inner' onWheel={e => onWheelHandler(false, id, e)}>\n\t\t\t\t{range(30).map(n => (\n\t\t\t\t\t<button key={n}>{`Button #${n}`}</button>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nlet wheelTimeoutRefsById: { [k: string]: any } = {}\n\nfunction onWheelHandler(isSelf: boolean, id: string, re: React.WheelEvent) {\n\tlet self = isSelf\n\t\t? (re.currentTarget as HTMLDivElement)\n\t\t: (re.currentTarget.parentElement as HTMLDivElement)\n\tlet e = re.nativeEvent\n\tif (isInside(self, document.activeElement)) {\n\t\tlet scrollPastTop = e.deltaY < 0 && self.scrollTop <= 0\n\t\tlet scrollPastBottom =\n\t\t\te.deltaY > 0 &&\n\t\t\tself.scrollTop >= self.scrollHeight - self.clientHeight\n\t\tif (scrollPastTop || scrollPastBottom) {\n\t\t\tre.preventDefault()\n\t\t}\n\t\tre.stopPropagation()\n\t} else {\n\t\tif (!(id in wheelTimeoutRefsById)) {\n\t\t\tself.style.paddingRight = `${self.offsetWidth -\n\t\t\t\tself.clientWidth -\n\t\t\t\t2}px`\n\t\t\tself.style.overflow = 'hidden'\n\t\t\tre.preventDefault()\n\t\t}\n\t\tclearTimeout(wheelTimeoutRefsById[id])\n\t\twheelTimeoutRefsById[id] = setTimeout(() => {\n\t\t\tdelete wheelTimeoutRefsById[id]\n\t\t\tself.style.paddingRight = '0px'\n\t\t\tself.style.overflow = 'auto'\n\t\t}, 1000)\n\t}\n}\n\nfunction isInside(ancestor: Element, descendant: Element | null): boolean {\n\tif (!descendant) return false\n\tif (ancestor == descendant) return true\n\treturn isInside(ancestor, descendant.parentElement)\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}